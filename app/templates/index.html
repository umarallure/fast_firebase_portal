{% extends "base.html" %}
{% block content %}
<script>
// Redirect to /login if not authenticated
firebase.auth().onAuthStateChanged(function(user) {
    if (!user) {
        window.location.href = "/login";
    }
});
</script>
<div class="container mt-5">
    <h2 class="mb-4">Available Automations</h2>
    <div class="row">
        <!-- Automation Card Example -->
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer;" onclick="window.location.href='/dashboard'">
                <div class="card-body">
                    <h5 class="card-title">1) Export Data From GHL Sub accounts</h5>
                    <p class="card-text">This automation exports data from the GHL account.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #007bff;" onclick="window.location.href='/ghl-export'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-file-export text-primary me-2"></i>
                        GHL Pipeline & Notes Export <span class="badge bg-primary">New</span>
                    </h5>
                    <p class="card-text">Export opportunities and latest notes from selected GHL sub-accounts to CSV.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer;" onclick="window.location.href='/bulk-update-notes'">
                <div class="card-body">
                    <h5 class="card-title">2) Bulk Update Notes</h5>
                    <p class="card-text">Upload a CSV to bulk update notes for contacts in GHL.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #28a745;" onclick="window.location.href='/master-copy-notes'">
                <div class="card-body">
                    <h5 class="card-title">2.5) Master Copy Notes <span class="badge bg-success">Enhanced</span></h5>
                    <p class="card-text">Advanced bulk notes update with validation, backup, progress tracking, and error handling.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer;" onclick="window.location.href='/bulk-update-opportunity'">
                <div class="card-body">
                    <h5 class="card-title">3) Bulk Update Opportunity</h5>
                    <p class="card-text">Upload an Excel sheet to bulk update opportunities in GHL.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #ffc107;" onclick="window.location.href='/bulk-update-opportunity-owner'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-user-edit text-warning me-2"></i>
                        3.2) Bulk Update Opportunity Owner <span class="badge bg-warning text-dark">New</span>
                    </h5>
                    <p class="card-text">Upload a CSV file to bulk update opportunity owners/assignments based on account matching with progress tracking.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #28a745;" onclick="window.location.href='/master-child-opportunity-update'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-exchange-alt text-success me-2"></i>
                        3.3) Master-Child Opportunity Owner Update <span class="badge bg-success">Advanced</span>
                    </h5>
                    <p class="card-text">Match master and child opportunities using fuzzy algorithms and update master opportunity owners based on child assignments.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #17a2b8;" onclick="window.location.href='/bulk-update-pipeline-stage'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-exchange-alt text-info me-2"></i>
                        3.4) Bulk Update Pipeline & Stage <span class="badge bg-info">V2 API</span>
                    </h5>
                    <p class="card-text">Upload CSV to bulk update opportunity pipelines, stages, lead values, and notes using V2 API with direct Opportunity IDs.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #dc3545;" onclick="window.location.href='/master-child-notes'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-exchange-alt text-danger me-2"></i>
                        3.5) Master-Child Notes Transfer <span class="badge bg-danger">Advanced</span>
                    </h5>
                    <p class="card-text">Match contacts between Master and Child CSV files and transfer notes using intelligent fuzzy matching algorithms.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #6f42c1;" onclick="window.location.href='/custom-fields-ssn-export'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-id-card text-purple me-2"></i>
                        3.6) Custom Fields SSN Export <span class="badge bg-secondary">Security</span>
                    </h5>
                    <p class="card-text">Export custom fields containing SSN data from selected GHL accounts with secure handling and filtering capabilities.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer;" onclick="window.location.href='/audit-opportunity-matches'">
                <div class="card-body">
                    <h5 class="card-title">4) Audit-Opportunity-Matches</h5>
                    <p class="card-text">Upload an Excel sheet to bulk Audit opportunities in GHL.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #007bff;" onclick="window.location.href='/contact-migration'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-users text-primary me-2"></i>
                        5) Contact Migration (Phase 1)
                    </h5>
                    <p class="card-text">Migrate contacts with custom field mapping between GHL accounts. Simplified contact-only mode.</p>
                    <span class="badge bg-primary">New</span>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #17a2b8;" onclick="window.location.href='/transfer-portal-comparison'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-exchange-alt text-info me-2"></i>
                        6) Transfer Portal Comparison <span class="badge bg-info">Advanced</span>
                    </h5>
                    <p class="card-text">Compare child and master CSV files to find new entries not present in master database with intelligent phone and name matching.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer; border-left: 4px solid #6f42c1;" onclick="window.location.href='/lead-search'">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-search text-primary me-2"></i>
                        7) Lead Database Search <span class="badge bg-primary">New</span>
                    </h5>
                    <p class="card-text">Search lead database by name using intelligent fuzzy matching. Find Draft Date, Monthly Premium, Coverage Amount, Carrier, and Call Center information with smart name matching algorithms.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card automation-card h-100" style="cursor:pointer;" onclick="window.location.href='/bulk-update-opportunity-stage'">
                <div class="card-body">
                    <h5 class="card-title">Bulk Update Opportunity Pipeline & Stage</h5>
                    <p class="card-text">Upload a CSV to bulk update opportunity pipeline and stage in GHL.</p>
                </div>
            </div>
        </div>
        <!-- Add more automation cards here as needed -->
    </div>
</div>
<style>
.automation-card:hover {
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    transform: translateY(-4px) scale(1.03);
    transition: all 0.2s;
}
</style>
{% endblock %}
{% block scripts %}
{{ super() }}
<script src="/static/js/auth-protect.js"></script>
{% endblock %}
